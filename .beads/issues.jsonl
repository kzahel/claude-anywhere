{"id":"yepanywhere-4gv","title":"Implement OpenCodeSessionReader for browsing OpenCode session history","description":"## Background\n\nOpenCode stores sessions in a SQLite database at ~/.local/share/opencode/storage/, not JSONL files like Claude. Currently in packages/server/src/app.ts:164-168, OpenCode projects fall back to ClaudeSessionReader which doesn't work - sessions won't be visible.\n\n## What needs to happen\n\n1. Research OpenCode's SQLite schema - examine the storage database to understand:\n   - Table structure for sessions and messages\n   - How message parts (text, tool-use, tool-result) are stored\n   - Session metadata (created, updated, etc.)\n\n2. Implement OpenCodeSessionReader that implements ISessionReader interface:\n   - listSessions(projectId) - query sessions from SQLite\n   - getSessionSummary(sessionId, projectId) - get session metadata\n   - getSession(sessionId, projectId, afterMessageId?) - get full session with messages\n   - Convert OpenCode's message format to our normalized Message type\n\n3. Wire up in app.ts - replace the fallback with the real reader\n\n## References\n\n- ISessionReader interface: packages/server/src/sessions/types.ts\n- Example implementation: ClaudeSessionReader in packages/server/src/sessions/reader.ts\n- OpenCode SSE schema (shows message structure): packages/shared/src/opencode-schema/events.ts\n- Provider capabilities doc: docs/research/provider-capabilities.md","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T13:07:02.226608122+01:00","created_by":"kgraehl","updated_at":"2026-01-08T13:15:25.645782317+01:00"}
